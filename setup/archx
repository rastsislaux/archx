#!/usr/bin/env bash
set -euo pipefail

SCRIPT_DIR="$(cd -- "$(dirname -- "${BASH_SOURCE[0]}")" && pwd)"

if ! command -v python3 >/dev/null 2>&1; then
  echo "[archx-setup] python3 not found; installing via pacman..."
  sudo pacman -S --noconfirm --needed python
fi

export PYTHONPATH="$SCRIPT_DIR${PYTHONPATH:+:$PYTHONPATH}"
exec python3 -m archx_setup --config-dir "$SCRIPT_DIR/config" "$@"
